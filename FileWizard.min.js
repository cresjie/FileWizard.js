!function(t){function i(t,e,s){return this.$element=$(t),this.settings=$.extend({},i.DEFAULTS,e),this.headers=$.extend({},i.HEADERS,s),this.files=[],this.init(),this}function s(t,e){var s=[];if(arguments.length>1)for(var n in arguments)s.push(arguments[n]);var a=$(this),r=a.data("FileWizard");return r?r[t]?r[t].apply(r,s.splice(1,1)):void 0:(a.data("FileWizard",new i(a,t,e)),a)}var n=1;i.DEFAULTS={dragover:function(){},drop:function(){},dragenter:function(){},dragleave:function(){},rejected:function(t,e){switch(e){case"file_limit":alert("File exceeds file limit");break;case"file_type":alert("file type not allowed")}},fileAdded:function(){},paramName:"files",url:"",method:"POST",clickable:!0,autoSend:!1,acceptedFiles:"image/*",maxSize:5,multipleFiles:!0},i.HEADERS={},i.sizeToMB=function(t){return t/1024/1024};var a={addData:function(t,e){if((!this.settings.data||this.settings.data&&this.settings.data.constructor!=FormData)&&(this.settings.data=new FormData),t)if(t.constructor==Object)for(var i in t)this.settings.data.append(i,t[i]);else this.settings.data.append(t,e);return this},getFiles:function(){return this.files},resetFiles:function(){return this.files=[],this.input.value=null,this},addFiles:function(t){var e=this;limit=e.settings.multipleFiles?t.length:1;for(var s=0;s<limit;s++)i.sizeToMB(t[s].size)>e.settings.maxSize?e.settings.rejected.call(this,t[s],"file_limit"):t[s].type.match(e.settings.acceptedFiles)?(e.files.push(t[s]),e.settings.fileAdded.call(this,t[s])):e.settings.rejected.call(this,t[s],"file_type");return this},removeFile:function(t,e){return e=e?e:1,this.files.splice(t,e),this},setOptions:function(t){return $.extend(this.settings,t),this},send:function(){this.addData.apply(this,arguments);for(var t in this.files){var e=this.files.length>1?this.settings.paramName+"[]":this.settings.paramName;this.addData(e,this.files[t])}return this.fileUploader=new FileUploader(this.settings,this.headers),this},abort:function(){return this.fileUploader&&this.fileUploader.abort(),this},init:function(){var t=this;return this.$element.each(function(i,s){$(s).on({dragenter:function(e){e.originalEvent.dataTransfer.types.indexOf("Files")>-1&&($(this).addClass("filewizard-dragenter"),t.settings.dragenter.call(this,e))},dragleave:function(e){$(this).removeClass("filewizard-dragenter"),t.settings.dragleave.call(this,e)},dragover:function(e){e.preventDefault(),t.settings.dragover.call(this,e)},drop:function(i){e=i.originalEvent,e.stopPropagation(),e.preventDefault(),$(this).removeClass("filewizard-dragenter"),e.dataTransfer.types.indexOf("Files")>-1?(files=e.dataTransfer.files,t.settings.drop.call(this,e,files),console.log(t.settings.url),t.addFiles(files)):t.settings.rejected.call(this,null,"not_file",e)}})}),t.settings.clickable&&this.initForm(),this},initForm:function(){var t=this;t.input=document.createElement("input"),$(t.input).attr({type:"file","class":"filewizard-input filewizard-input-"+n}).css("display","none").on("change",function(e){t.addFiles(this.files)}),this.$element.on("click",function(e){e.preventDefault(),$(t.input).trigger("click")}),$("body").append(t.input),n++},getSettings:function(){return this.settings}};$.extend(i.prototype,a),$.fn.FileWizard=s,$.fn.FileWizard.Constructor=i,t.FileWizard=i}(window);